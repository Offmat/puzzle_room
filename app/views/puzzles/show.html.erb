<h1><%= @puzzle.name %></h1>

<% if @puzzle.description %>
  <p>
    Description: <%= @puzzle.description %>
  </p>
<% end %>

<p>
  Difficulty level: <b><%= @puzzle.level %>/6</b>
</p>

<p>
  Producer: <%= link_to @puzzle.producer.name, @puzzle.producer, class: "text-link" %>
</p>

<p>
  <% if @puzzle.materials.any? %>
    Materials: <%= @puzzle.materials.map(&:name).join(', ').titleize %>
  <% end %>
</p>
<p>
  <% if @puzzle.inventor %>
    <%= @puzzle.name %> was invented by
    <%= link_to @puzzle.inventor.full_name, @puzzle.inventor, class: "text-link" %>
    <% if @puzzle.design_year %>
      in the year <%= @puzzle.design_year %>
    <% end %>
  <% else %>
    <% if @puzzle.design_year %>
      <%= @puzzle.name %> was invented in the year <%= @puzzle.design_year %>
    <% end %>
  <% end %>
</p>
<p>
  <%= link_to "Edit", edit_puzzle_path(@puzzle), class: "btn btn-primary btn-xs" %>
  <%= link_to "Delete", @puzzle, method: :delete,
    data: { confirm: "Are you sure you want do delete #{@puzzle.name} puzzle?" },
    class: "btn btn-danger btn-xs"%>
  <%= link_to "Back", puzzles_path, class: "btn btn-primary btn-xs" %>
</p>

<p>
  <% if @puzzle.rates.exists?(user: current_user) %>
    You rated this puzzle for <%= @puzzle.rates.find_by(user: current_user).rating %>/10
  <% else %>
    <%= render 'rates/form' %>
  <% end %>
</p>

<p>
  <%= render 'possesions/form' %>
</p>

<h3>Comments</h3>
<p>
  <%= render 'comments/list', model: @puzzle  %>
</p>

<p>
  <%= render 'comments/form', model: @puzzle %>
</p>
